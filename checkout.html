<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>VIP Checkout</title>
    <link rel="icon" type="image/x-icon" href="logo-removebg-preview.png" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="cart-utils.js"></script>
    <body class="bg-gray-50 min-h-screen flex items-center justify-center">
      <div class="w-full max-w-4xl bg-white rounded-2xl shadow-2xl p-8 md:p-12">
        <!-- Header -->
        <h1 class="text-3xl font-bold text-center text-gray-900 mb-6">
          üõçÔ∏è VIP Checkout
        </h1>

        <!-- Checkout Form -->
        <form class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <!-- Billing Details -->
          <div>
            <h2 class="text-xl font-semibold mb-4">Billing Details</h2>
            <input
              type="text"
              placeholder="Full Name"
              class="w-full mb-3 px-4 py-3 border rounded-lg focus:ring-2 focus:ring-black"
            />
            <input
              type="email"
              placeholder="Email Address"
              class="w-full mb-3 px-4 py-3 border rounded-lg focus:ring-2 focus:ring-black"
            />
            <input
              type="text"
              placeholder="Phone Number"
              class="w-full mb-3 px-4 py-3 border rounded-lg focus:ring-2 focus:ring-black"
            />
            <input
              type="text"
              placeholder="Address"
              class="w-full mb-3 px-4 py-3 border rounded-lg focus:ring-2 focus:ring-black"
            />
            <input
              type="text"
              placeholder="City"
              class="w-full mb-3 px-4 py-3 border rounded-lg focus:ring-2 focus:ring-black"
            />
            <input
              type="text"
              placeholder="Postal Code"
              class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-black"
            />
          </div>

          <!-- Order Summary -->
          <div>
            <h2 class="text-xl font-semibold mb-4">Order Summary</h2>
            <div id="order-summary" class="bg-gray-100 p-4 rounded-lg mb-4">
              <!-- Products will load here -->
            </div>

            <!-- Payment -->
            <h2 class="text-xl font-semibold mb-4">Payment Method</h2>
            <select
              class="w-full mb-4 px-4 py-3 border rounded-lg focus:ring-2 focus:ring-black"
            >
              <option>Credit / Debit Card</option>
              <option>PayPal</option>
              <option>Cash on Delivery</option>
            </select>

            <!-- Checkout Button -->
            <a href="thankyou.html">
              <button
                type="button"
                class="w-full bg-black text-white py-3 rounded-lg font-semibold text-lg hover:bg-gray-800 transition duration-300"
              >
                Complete Order
              </button>
            </a>
          </div>
        </form>
      </div>

      <script>
        // Load cart data using cartUtils
        let cart = cartUtils.getCart();
        let orderSummary = document.getElementById("order-summary");

        if (cart.length === 0) {
          orderSummary.innerHTML =
            "<p class='text-gray-500'>Your cart is empty.</p>";
        } else {
          const totals = cartUtils.calculateTotals(cart);

          cart.forEach((item) => {
            const usdPrice = cartUtils.convertPkrToUsd(item.price);
            const totalPrice = usdPrice * item.quantity;

            let row = document.createElement("div");
            row.className = "flex justify-between mb-2";
            row.innerHTML = `<span>${item.name} (${
              item.quantity
            }x)</span><span>${cartUtils.formatUsdPrice(totalPrice)}</span>`;
            orderSummary.appendChild(row);
          });

          let subtotalRow = document.createElement("div");
          subtotalRow.className = "flex justify-between border-t pt-2 mt-2";
          subtotalRow.innerHTML = `<span>Subtotal</span><span>${cartUtils.formatUsdPrice(
            totals.subtotal
          )}</span>`;
          orderSummary.appendChild(subtotalRow);

          let shippingRow = document.createElement("div");
          shippingRow.className = "flex justify-between";
          shippingRow.innerHTML = `<span>Shipping</span><span>${
            totals.shipping === "FREE"
              ? "FREE"
              : cartUtils.formatUsdPrice(totals.shipping)
          }</span>`;
          orderSummary.appendChild(shippingRow);

          let taxRow = document.createElement("div");
          taxRow.className = "flex justify-between";
          taxRow.innerHTML = `<span>Tax</span><span>${cartUtils.formatUsdPrice(
            totals.tax
          )}</span>`;
          orderSummary.appendChild(taxRow);

          let totalRow = document.createElement("div");
          totalRow.className =
            "flex justify-between font-bold border-t pt-2 mt-2";
          totalRow.innerHTML = `<span>Total</span><span>${cartUtils.formatUsdPrice(
            totals.total
          )}</span>`;
          orderSummary.appendChild(totalRow);
        }
      </script>
    </body>
  </head>
</html>
