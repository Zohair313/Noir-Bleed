<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shopping Cart - NOIR BLEED</title>
    <link rel="icon" type="image/x-icon" href="logo-removebg-preview.png" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="cart-utils.js"></script>
    <script src="cart-integration.js"></script>
    <script src="cart-debug.js"></script>
    <style>
      /* Premium animations and transitions */
      .cart-item {
        transition: all 0.3s ease;
      }

      .cart-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
      }

      .quantity-btn {
        transition: all 0.2s ease;
      }

      .quantity-btn:hover {
        background-color: #000;
        color: white;
      }

      .checkout-btn {
        transition: all 0.3s ease;
        background: linear-gradient(135deg, #000 0%, #333 100%);
      }

      .checkout-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.2);
      }

      .empty-cart {
        animation: fadeIn 0.6s ease-out;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Mobile optimizations */
      @media (max-width: 768px) {
        .cart-container {
          padding: 1rem;
        }

        .cart-item {
          flex-direction: column;
          gap: 1rem;
        }

        .item-details {
          text-align: center;
        }

        .quantity-controls {
          justify-content: center;
        }
      }

      /* Loading animation */
      .loading {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.7;
        }
      }
    </style>
  </head>
  <body class="bg-gray-50 min-h-screen">
    <!-- Navigation -->
    <header
      class="w-full flex items-center justify-between px-4 sm:px-6 py-4 bg-black z-40"
    >
      <div class="flex items-center space-x-2">
        <!-- Menu icon -->
        <button id="openMenu" class="text-white text-xl sm:text-2xl">
          &#9776;
        </button>
        <a href="index.html" class="flex items-center space-x-2">
          <h3 class="text-xl sm:text-2xl md:text-3xl font-bold text-white">
            NOIR
          </h3>
          <!-- Heroicon cart -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6 sm:h-8 sm:w-8 text-yellow-500"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13l-1.5 6H19m-12 0a1 1 0 11-2 0 1 1 0 012 0zm12 0a1 1 0 11-2 0 1 1 0 012 0z"
            />
          </svg>
          <h3 class="text-xl sm:text-2xl md:text-3xl font-bold text-white">
            BLEED
          </h3>
        </a>
      </div>
      <!-- Icons -->
      <div class="flex items-center space-x-4">
        <!-- Search Icon -->
        <button id="searchIcon" class="transition transform hover:scale-125">
          <svg
            viewBox="0 0 24 24"
            class="w-5 h-5"
            stroke="white"
            fill="none"
            stroke-width="2"
          >
            <circle cx="11" cy="11" r="7"></circle>
            <line x1="16.65" y1="16.65" x2="21" y2="21"></line>
          </svg>
        </button>
        <!-- Search Bar (Hidden by Default) -->
        <div
          id="searchBar"
          class="fixed top-14 left-0 w-full flex justify-center px-4 opacity-0 scale-y-0 transform transition-all duration-300 origin-top z-50"
        >
          <input
            type="text"
            placeholder="Search here..."
            class="w-full max-w-md px-4 py-2 rounded-md shadow-lg border border-gray-300 focus:ring-yellow-500 focus:border-yellow-500"
          />
        </div>
        <!-- Account Icon -->
        <a href="login.html">
          <svg
            viewBox="0 0 24 24"
            class="w-5 h-5"
            stroke="white"
            fill="none"
            stroke-width="2"
          >
            <circle cx="12" cy="8" r="4"></circle>
            <path d="M4 20c0-4 4-6 8-6s8 2 8 6"></path>
          </svg>
        </a>

        <!-- Cart Icon -->
        <a href="cart.html">
          <svg
            viewBox="0 0 24 24"
            class="w-5 h-5"
            stroke="white"
            fill="none"
            stroke-width="2"
          >
            <path d="M6 8h12l1 12H5L6 8z"></path>
            <path d="M9 8V6a3 3 0 0 1 6 0v2"></path>
          </svg>
        </a>
      </div>
    </header>

    <!-- Side Menu -->
    <aside
      id="sideMenu"
      class="fixed top-0 left-0 h-full w-64 sm:w-80 bg-gray-900 text-white transform -translate-x-full side-menu z-50"
    >
      <div
        class="p-4 sm:p-6 border-b border-gray-700 flex justify-between items-center"
      >
        <h2 class="text-lg font-bold">Products</h2>
        <button id="closeMenu" class="text-2xl">&times;</button>
      </div>
      <nav class="p-4 sm:p-6 space-y-4">
        <a
          href="all2.html"
          class="block hover:text-gray-400 text-sm sm:text-base"
          >New Arrivals</a
        >
        <a
          href="all5.html"
          class="block hover:text-gray-400 text-sm sm:text-base"
          >T-Shirts & Shirts</a
        >
        <a
          href="all6.html"
          class="block hover:text-gray-400 text-sm sm:text-base"
          >UniSex Hoodies</a
        >
        <a
          href="all4.html"
          class="block hover:text-gray-400 text-sm sm:text-base"
          >Modern Classic</a
        >
        <a
          href="all3.html"
          class="block hover:text-gray-400 text-sm sm:text-base"
          >Trendy Deals</a
        >
      </nav>
    </aside>

    <!-- Debug Panel (initially hidden) -->
    <div
      id="debugPanel"
      class="fixed top-20 right-4 bg-yellow-100 border border-yellow-300 rounded-lg p-4 shadow-lg z-50 hidden"
    >
      <h3 class="font-bold text-yellow-800 mb-2">Debug Info</h3>
      <div id="debugInfo" class="text-xs text-yellow-700"></div>
      <div class="mt-2 space-x-2">
        <button
          onclick="addTestProduct()"
          class="px-2 py-1 bg-yellow-500 text-white text-xs rounded"
        >
          Add Test
        </button>
        <button
          onclick="clearCartDebug()"
          class="px-2 py-1 bg-red-500 text-white text-xs rounded"
        >
          Clear Cart
        </button>
        <button
          onclick="checkLocalStorage()"
          class="px-2 py-1 bg-blue-500 text-white text-xs rounded"
        >
          Check Storage
        </button>
      </div>
    </div>

    <!-- Debug Toggle Button -->
    <button
      id="debugToggle"
      class="fixed top-4 right-4 bg-gray-800 text-white p-2 rounded-full text-xs z-50"
    >
      üêõ
    </button>

    <!-- Main Cart Content -->
    <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
      <h1 class="text-3xl font-bold text-gray-900 mb-8">Shopping Cart</h1>

      <div class="lg:grid lg:grid-cols-12 lg:gap-x-12">
        <!-- Cart Items -->
        <div class="lg:col-span-8">
          <div id="cart-items" class="space-y-6">
            <!-- Cart items will be dynamically loaded here -->
            <div class="empty-cart text-center py-16">
              <svg
                class="mx-auto h-16 w-16 text-gray-400 mb-4"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13l-1.5 6H19m-12 0a1 1 0 11-2 0 1 1 0 012 0zm12 0a1 1 0 11-2 0 1 1 0 012 0z"
                />
              </svg>
              <h3 class="text-lg font-medium text-gray-900 mb-2">
                Your cart is empty
              </h3>
              <p class="text-gray-500 mb-6">
                Start shopping to add items to your cart
              </p>
              <a
                href="index.html"
                class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-black hover:bg-gray-800"
              >
                Start Shopping
              </a>
            </div>
          </div>
        </div>

        <!-- Order Summary -->
        <div class="lg:col-span-4 mt-8 lg:mt-0">
          <div class="bg-white rounded-lg shadow-lg p-6">
            <h2 class="text-lg font-semibold text-gray-900 mb-4">
              Order Summary
            </h2>

            <div class="space-y-4">
              <div class="flex justify-between">
                <span class="text-gray-600">Subtotal</span>
                <span class="font-medium" id="subtotal">$0.00</span>
              </div>

              <div class="flex justify-between">
                <span class="text-gray-600">Shipping</span>
                <span class="font-medium" id="shipping">$0.00</span>
              </div>

              <div class="flex justify-between">
                <span class="text-gray-600">Tax</span>
                <span class="font-medium" id="tax">$0.00</span>
              </div>

              <div class="border-t pt-4">
                <div class="flex justify-between text-lg font-semibold">
                  <span>Total</span>
                  <span id="total">$0.00</span>
                </div>
              </div>
            </div>

            <a href="checkout.html">
              <button
                class="checkout-btn w-full mt-6 py-3 px-4 border border-transparent rounded-md text-white font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black"
              >
                Proceed to Checkout
              </button>
            </a>

            <p class="text-xs text-gray-500 text-center mt-4">
              Free shipping on orders over $100
            </p>
          </div>

          <!-- Promo Code -->
          <div class="bg-white rounded-lg shadow-lg p-6 mt-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">Promo Code</h3>
            <div class="flex space-x-2">
              <input
                type="text"
                placeholder="Enter promo code"
                class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black"
              />
              <button
                id="applyBtn"
                class="px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800"
              >
                Apply
              </button>

              <script>
                document
                  .getElementById("applyBtn")
                  .addEventListener("click", function () {
                    alert("Coupon Applied Successfully!");
                  });
              </script>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer (OUTSIDE hero) -->
    <footer class="bg-black text-white py-4 sm:py-6 px-4 sm:px-8 mt-8">
      <div
        class="container mx-auto grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-8 text-xs sm:text-sm"
      >
        <div>
          <ul class="space-y-1 sm:space-y-2">
            <li><a href="faq.html" class="hover:underline">FAQ's</a></li>
            <li>
              <a href="faq.html" class="hover:underline">Log In/Sign Up</a>
            </li>
            <li><a href="faq.html" class="hover:underline">How to Buy</a></li>
            <li><a href="faq.html" class="hover:underline">Payment</a></li>
            <li>
              <a href="faq.html" class="hover:underline"
                >Shipping & Deliveries</a
              >
            </li>
            <li>
              <a href="faq.html" class="hover:underline">Exchange & Returns</a>
            </li>
          </ul>
        </div>
        <div class="flex justify-center items-center space-x-2">
          <h3 class="text-xl sm:text-2xl md:text-3xl font-bold">NOIR</h3>
          <!-- Heroicon cart -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6 sm:h-8 sm:w-8 text-yellow-500"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13l-1.5 6H19m-12 0a1 1 0 11-2 0 1 1 0 012 0zm12 0a1 1 0 11-2 0 1 1 0 012 0z"
            />
          </svg>
          <h3 class="text-xl sm:text-2xl md:text-3xl font-bold">BLEED</h3>
        </div>
        <div class="text-right">
          <ul class="space-y-1 sm:space-y-2">
            <li><a href="faq.html" class="hover:underline">About Us</a></li>
            <li><a href="faq.html" class="hover:underline">Contact</a></li>
            <li><a href="faq.html" class="hover:underline">Affiliate</a></li>
            <li><a href="faq.html" class="hover:underline">Press</a></li>
            <li><a href="faq.html" class="hover:underline">Sitemap</a></li>
            <li>
              <a href="faq.html" class="hover:underline">Privacy Policy</a>
            </li>
          </ul>
        </div>
      </div>
      <p class="text-center text-xs text-gray-400 mt-4">
        ¬© 2025 NOIR BLEED. All rights reserved.
      </p>
    </footer>

    <script>
      // Load cart items
      function loadCartItems() {
        const cartItemsContainer = document.getElementById("cart-items");
        const cartItems = cartUtils.getCart();

        if (cartItems.length === 0) {
          cartItemsContainer.innerHTML = `
                          <div class="empty-cart text-center py-16">
                              <svg class="mx-auto h-16 w-16 text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13l-1.5 6H19m-12 0a1 1 0 11-2 0 1 1 0 012 0zm12 0a1 1 0 11-2 0 1 1 0 012 0z"/>
                              </svg>
                              <h3 class="text-lg font-medium text-gray-900 mb-2">Your cart is empty</h3>
                              <p class="text-gray-500 mb-6">Start shopping to add items to your cart</p>
                              <a href="index.html" class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-black hover:bg-gray-800">
                                  Start Shopping
                              </a>
                          </div>
                      `;

          // Reset order summary
          document.getElementById("subtotal").textContent = "$0.00";
          document.getElementById("shipping").textContent = "$0.00";
          document.getElementById("tax").textContent = "$0.00";
          document.getElementById("total").textContent = "$0.00";

          return;
        }

        cartItemsContainer.innerHTML = cartItems
          .map((item) => {
            const usdPrice = cartUtils.convertPkrToUsd(item.price);
            const totalPrice = usdPrice * item.quantity;

            return `
                      <div class="cart-item bg-white rounded-lg shadow-md p-6 flex items-center space-x-6">
                          <img src="${item.image}" alt="${
              item.name
            }" class="w-20 h-20 object-cover rounded">

                          <div class="flex-1">
                              <h3 class="text-lg font-semibold text-gray-900">${
                                item.name
                              }</h3>
                              <p class="text-gray-600">${item.color} ‚Ä¢ ${
              item.size
            }</p>
                              <p class="text-lg font-bold text-gray-900">${cartUtils.formatUsdPrice(
                                usdPrice
                              )}</p>
                          </div>

                          <div class="flex items-center space-x-3">
                              <button class="quantity-btn w-8 h-8 border border-gray-300 rounded flex items-center justify-center" onclick="updateQuantity('${
                                item.cartId
                              }', ${item.quantity - 1})">-</button>
                              <span class="w-12 text-center font-medium">${
                                item.quantity
                              }</span>
                              <button class="quantity-btn w-8 h-8 border border-gray-300 rounded flex items-center justify-center" onclick="updateQuantity('${
                                item.cartId
                              }', ${item.quantity + 1})">+</button>
                          </div>

                          <div class="text-right">
                              <p class="text-xl font-bold text-gray-900">${cartUtils.formatUsdPrice(
                                totalPrice
                              )}</p>
                              <button class="text-red-600 hover:text-red-800 text-sm mt-2" onclick="removeItem('${
                                item.cartId
                              }')">
                                  Remove
                              </button>
                          </div>
                      </div>
                      `;
          })
          .join("");

        updateOrderSummary(cartItems);
      }

      // Update quantity
      function updateQuantity(cartId, newQuantity) {
        cartUtils.updateQuantity(cartId, newQuantity);
        loadCartItems();
      }

      // Remove item
      function removeItem(cartId) {
        cartUtils.removeFromCart(cartId);
        loadCartItems();
      }

      // Update order summary
      function updateOrderSummary(cartItems) {
        const totals = cartUtils.calculateTotals(cartItems);

        document.getElementById("subtotal").textContent =
          cartUtils.formatUsdPrice(totals.subtotal);
        document.getElementById("shipping").textContent =
          totals.shipping === "FREE"
            ? "FREE"
            : cartUtils.formatUsdPrice(totals.shipping);
        document.getElementById("tax").textContent = cartUtils.formatUsdPrice(
          totals.tax
        );
        document.getElementById("total").textContent = cartUtils.formatUsdPrice(
          totals.total
        );
      }

      // Initialize cart
      document.addEventListener("DOMContentLoaded", () => {
        loadCartItems();

        // Add loading animation to checkout button
        document
          .querySelector(".checkout-btn")
          .addEventListener("click", function () {
            const cartItems = cartUtils.getCart();
            if (cartItems.length === 0) {
              alert("Your cart is empty. Please add items before checkout.");
              return;
            }

            this.classList.add("loading");
            setTimeout(() => {
              this.classList.remove("loading");
              alert(
                "Checkout functionality would be implemented here! You would be redirected to a payment page."
              );
            }, 1000);
          });
      });
      const sideMenu = document.getElementById("sideMenu");
      const openMenu = document.getElementById("openMenu");
      const closeMenu = document.getElementById("closeMenu");
      openMenu.addEventListener("click", () => {
        sideMenu.classList.remove("-translate-x-full");
      });
      closeMenu.addEventListener("click", () => {
        sideMenu.classList.add("-translate-x-full");
      });
      // üîç Search Bar Toggle
      const searchIcon = document.getElementById("searchIcon");
      const searchBar = document.getElementById("searchBar");
      const searchInput = searchBar.querySelector("input");
      let isVisible = false;

      // Toggle search bar on click
      searchIcon.addEventListener("click", () => {
        if (!isVisible) {
          searchBar.classList.remove("opacity-0", "scale-y-0");
          searchBar.classList.add("opacity-100", "scale-y-100");
          searchInput.focus();
          isVisible = true;
        } else {
          searchBar.classList.remove("opacity-100", "scale-y-100");
          searchBar.classList.add("opacity-0", "scale-y-0");
          isVisible = false;
        }
      });

      // üîé On ENTER ‚Üí hide bar & go to all1.html
      searchInput.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
          e.preventDefault();

          // hide bar
          searchBar.classList.remove("opacity-100", "scale-y-100");
          searchBar.classList.add("opacity-0", "scale-y-0");
          isVisible = false;

          // clear input
          searchInput.value = "";

          // redirect
          window.location.href = "all1.html";
        }
      });
    </script>
  </body>
</html>
